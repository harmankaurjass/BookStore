{"ast":null,"code":"import { AUTH_SIGN_UP, AUTH_SIGN_IN, AUTH_ERROR, AUTH_SIGN_OUT } from './types';\nimport axios from 'axios';\nexport const signOut = () => {\n  return dispatch => {\n    localStorage.clear();\n    dispatch({\n      type: AUTH_SIGN_OUT,\n      payload: ''\n    });\n  };\n};\nexport const checkAuth = () => {\n  return async dispatch => {\n    try {\n      const token = localStorage.getItem('JWT_TOKEN');\n\n      if (token) {\n        await axios.get('/users/status', {\n          headers: {\n            'Authorization': `${token}`\n          }\n        });\n        dispatch({\n          type: AUTH_SIGN_IN\n        });\n      } else {\n        console.log('User is not authenticated');\n      }\n    } catch (err) {\n      console.log('error', err);\n    }\n  };\n};\nexport const oauthGoogle = data => {\n  return async dispatch => {\n    try {\n      const res = await axios.post('/users/oauth/google', {\n        access_token: data\n      });\n      localStorage.setItem('JWT_TOKEN', res.data.token);\n      dispatch({\n        type: AUTH_SIGN_UP,\n        payload: {\n          \"jwtToken\": res.data.token,\n          \"accessToken\": data\n        }\n      });\n    } catch (err) {\n      dispatch({\n        type: AUTH_ERROR,\n        payload: \"A problem has occured in SignUp\"\n      });\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/Caurv/Documents/capstone/BookStore/BookStore/client/src/actions/authAction.js"],"names":["AUTH_SIGN_UP","AUTH_SIGN_IN","AUTH_ERROR","AUTH_SIGN_OUT","axios","signOut","dispatch","localStorage","clear","type","payload","checkAuth","token","getItem","get","headers","console","log","err","oauthGoogle","data","res","post","access_token","setItem"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,YAAvB,EAAqCC,UAArC,EAAiDC,aAAjD,QAAsE,SAAtE;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,OAAO,MAAMC,OAAO,GAAG,MAAM;AACzB,SAAOC,QAAQ,IAAI;AACfC,IAAAA,YAAY,CAACC,KAAb;AACAF,IAAAA,QAAQ,CAAC;AACLG,MAAAA,IAAI,EAAEN,aADD;AAELO,MAAAA,OAAO,EAAE;AAFJ,KAAD,CAAR;AAIH,GAND;AAOH,CARM;AAYP,OAAO,MAAMC,SAAS,GAAG,MAAM;AAC3B,SAAO,MAAML,QAAN,IAAkB;AACrB,QAAI;AACA,YAAMM,KAAK,GAAGL,YAAY,CAACM,OAAb,CAAqB,WAArB,CAAd;;AACA,UAAID,KAAJ,EAAW;AACP,cAAMR,KAAK,CAACU,GAAN,CAAU,eAAV,EAA2B;AAC7BC,UAAAA,OAAO,EAAE;AACL,6BAAkB,GAAEH,KAAM;AADrB;AADoB,SAA3B,CAAN;AAMAN,QAAAA,QAAQ,CAAC;AACLG,UAAAA,IAAI,EAAER;AADD,SAAD,CAAR;AAGH,OAVD,MAUO;AACHe,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACH;AAEJ,KAhBD,CAgBE,OAAOC,GAAP,EAAY;AACVF,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBC,GAArB;AACH;AACJ,GApBD;AAqBH,CAtBM;AA0BP,OAAO,MAAMC,WAAW,GAAGC,IAAI,IAAI;AAC/B,SAAO,MAAMd,QAAN,IAAkB;AACrB,QAAI;AACA,YAAMe,GAAG,GAAG,MAAMjB,KAAK,CAACkB,IAAN,CAAW,qBAAX,EAAkC;AAChDC,QAAAA,YAAY,EAAEH;AADkC,OAAlC,CAAlB;AAGAb,MAAAA,YAAY,CAACiB,OAAb,CAAqB,WAArB,EAAkCH,GAAG,CAACD,IAAJ,CAASR,KAA3C;AACAN,MAAAA,QAAQ,CAAC;AACLG,QAAAA,IAAI,EAAET,YADD;AAELU,QAAAA,OAAO,EAAE;AAAE,sBAAYW,GAAG,CAACD,IAAJ,CAASR,KAAvB;AAA8B,yBAAeQ;AAA7C;AAFJ,OAAD,CAAR;AAKH,KAVD,CAUE,OAAOF,GAAP,EAAY;AACVZ,MAAAA,QAAQ,CAAC;AACLG,QAAAA,IAAI,EAAEP,UADD;AAELQ,QAAAA,OAAO,EAAE;AAFJ,OAAD,CAAR;AAIH;AACJ,GAjBD;AAkBH,CAnBM","sourcesContent":["import { AUTH_SIGN_UP, AUTH_SIGN_IN, AUTH_ERROR, AUTH_SIGN_OUT } from './types';\nimport axios from 'axios';\n\n\nexport const signOut = () => {\n    return dispatch => {\n        localStorage.clear();\n        dispatch({\n            type: AUTH_SIGN_OUT,\n            payload: ''\n        })\n    }\n}\n\n\n\nexport const checkAuth = () => {\n    return async dispatch => {\n        try {\n            const token = localStorage.getItem('JWT_TOKEN');\n            if (token) {\n                await axios.get('/users/status', {\n                    headers: {\n                        'Authorization': `${token}`\n                    }\n                });\n\n                dispatch({\n                    type: AUTH_SIGN_IN\n                });\n            } else {\n                console.log('User is not authenticated');\n            }\n\n        } catch (err) {\n            console.log('error', err)\n        }\n    };\n}\n\n\n\nexport const oauthGoogle = data => {\n    return async dispatch => {\n        try {\n            const res = await axios.post('/users/oauth/google', {\n                access_token: data\n            });\n            localStorage.setItem('JWT_TOKEN', res.data.token);\n            dispatch({\n                type: AUTH_SIGN_UP,\n                payload: { \"jwtToken\": res.data.token, \"accessToken\": data }\n            });\n\n        } catch (err) {\n            dispatch({\n                type: AUTH_ERROR,\n                payload: \"A problem has occured in SignUp\"\n            });\n        }\n    };\n}\n"]},"metadata":{},"sourceType":"module"}